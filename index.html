<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> WOW GAMZ </title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
    font-family:Arial, sans-serif;
    background:#00D9FA;
    color:#09ed65;
}

/* HEADER */
header{
    text-align:center;
    padding:20px;
    font-size:2.4rem;
    color:#ff9cff;
    text-shadow:0 0 10px #ff9cff;
}

/* GAME GRID */
.gallery{
    display:grid;
    gap:26px;
    max-width:1600px;
    margin:0 auto;
    padding:20px;
}

/* MOBILE */
@media (max-width:600px){
    .gallery{
        grid-template-columns:repeat(3, 1fr);
    }
}

/* TABLET */
@media (min-width:601px) and (max-width:1024px){
    .gallery{
        grid-template-columns:repeat(4, 1fr);
    }
}

/* LAPTOP */
@media (min-width:1025px){
    .gallery{
        grid-template-columns:repeat(5, 1fr);
    }
}

.card{
    background:#0303fc;
    border-radius:10px;
    overflow:hidden;
    cursor:pointer;
    transition:0.3s;
}

.card:hover{
    transform:scale(1.05);
    box-shadow:0 0 20px rgba(255,156,255,0.8);
}

.card img{
    width:100%;
    display:block;
}

.label{
    padding:8px;
    text-align:center;
    background:rgba(0,0,0,0.5);
    color:#cf03fc;
    font-size:0.95rem;
}

/* FULLSCREEN IFRAME */
#webview{
    position:fixed;
    inset:0;
    background:#160021;
    display:none;
    z-index:9999;
}

#webview iframe{
    width:100%;
    height:100%;
    border:none;
}

/* EXIT BUTTON */
#closeBtn{
    position:absolute;
    top:10px;
    right:20px;
    padding:8px 12px;
    font-size:14px;
    background:#00c3ff;
    color:#000;
    border:none;
    border-radius:6px;
    cursor:pointer;
    z-index:10000;
}

#closeBtn:hover{
    background:#ff8fe8;
}
</style>
</head>

<body>

<header> WOW GAMZ </header>

<div class="gallery">
<!-- ⚠️ IMAGE / CARD SECTION UNCHANGED -->
<div class="card" data-game="https://g.igroutka.ru/games/164/7mJkjtiaHp8n2QP0/10/subway_surfers_paris_summer_games/">
<img src="https://manual-magenta-4wuxmohltu.edgeone.app/7a35d4a468a820f1dc72b9ad22e9aeec.jpg">
<div class="label"> SUBWAY SURFERS </div>
</div>

<!-- KEEP ADDING / EDITING YOUR CARDS HERE -->
</div>

<!-- FULLSCREEN WEBVIEW -->
<div id="webview">
    <button id="closeBtn">✕ Exit</button>
    <iframe id="gameFrame" allowfullscreen></iframe>
</div>

<!-- ✅ JAVASCRIPT (ALL FEATURES ADDED) -->
<script>
const cards = document.querySelectorAll(".card");
const webview = document.getElementById("webview");
const frame = document.getElementById("gameFrame");
const closeBtn = document.getElementById("closeBtn");

/* OPEN GAME */
cards.forEach(card => {
  card.addEventListener("click", () => {
    frame.src = card.dataset.game;
    webview.style.display = "block";
    document.body.style.overflow = "hidden";

    // history for back button
    history.pushState({ gameOpen: true }, "");

    // request true fullscreen
    if (webview.requestFullscreen) {
      webview.requestFullscreen();
    } else if (webview.webkitRequestFullscreen) {
      webview.webkitRequestFullscreen();
    }
  });
});

/* CLOSE GAME */
function closeGame() {
  frame.src = "";
  webview.style.display = "none";
  document.body.style.overflow = "auto";

  // exit fullscreen
  if (document.fullscreenElement) {
    document.exitFullscreen();
  } else if (document.webkitFullscreenElement) {
    document.webkitExitFullscreen();
  }
}

/* EXIT BUTTON */
closeBtn.addEventListener("click", () => {
  closeGame();
  if (history.state && history.state.gameOpen) {
    history.back();
  }
});

/* BACK BUTTON HANDLER */
window.addEventListener("popstate", () => {
  if (webview.style.display === "block") {
    closeGame();
  }
});

/* ESC KEY */
document.addEventListener("keydown", e => {
  if (e.key === "Escape" && webview.style.display === "block") {
    closeGame();
  }
});
</script>

</body>
</html>
